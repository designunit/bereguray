import s from './styles.module.css'

export type BubbleProps = {
    style?: React.CSSProperties
    duration?: number
    color?: string
    opacity?: number
    picturePath?: string
}

export const Bubble: React.SFC<BubbleProps> = ({ duration = 30, picturePath, color = 'white', opacity = 1, ...props }) => {
    const path = (
        <path fill-rule="evenodd" clip-rule="evenodd" fill={color} opacity={opacity} >
            <animate dur={`${duration}s`} repeatCount="indefinite" attributeName='d'   
                calcMode='spline' // ease-in-out
                keyTimes="0 ; 0.25 ; 0.5 ; 0.75 ; 1"
                keySplines="0.5 0 0.5 1 ; 0.5 0 0.5 1 ; 0.5 0 0.5 1 ; 0.5 0 0.5 1"
                values="
                    M98.5875 1.09773C118.622 3.91366 129.488 30.4899 144.766 46.8913C158.408 61.5355 175.858 71.3599 183.154 91.8782C190.874 113.591 190.203 138.326 185.455 161.327C180.466 185.5 171.461 208.767 155.814 224.339C139.728 240.348 119.166 247.279 98.5875 247.777C77.6992 248.281 56.9674 241.857 39.7268 227.144C22.1409 212.137 7.37732 190.98 1.92919 165.293C-3.36374 140.338 3.11144 114.544 10.7565 90.5556C17.9671 67.9302 29.0468 48.1547 44.1693 32.7521C60.0597 16.5674 78.1981 0 98.5875 1.09773Z ;
                    M87.4507 0.542143C103.603 0 116.236 16.5427 129.743 28.0884C144.04 40.3102 161.526 49.2073 168.293 69.6496C175.293 90.7917 174.51 116.919 165.779 136.94C157.593 155.712 138.474 158.552 124.475 170.131C111.707 180.693 102.55 202.995 87.4507 201.734C72.3213 200.47 66.9274 173.921 53.7267 164.22C37.5817 152.356 11.7952 160.731 2.87289 139.582C-5.74455 119.156 6.97568 93.9295 15.3965 73.365C22.6482 55.6555 34.9228 43.879 47.1024 31.5695C59.7498 18.7872 71.4443 1.21639 87.4507 0.542143Z ;
                    M71.1174 20.6994C87.2075 22.5145 104.491 5.94268 118.287 16.7294C132.12 27.5461 133.448 52.2754 137.325 72.4675C140.914 91.1653 142.151 109.72 139.789 128.737C137.017 151.046 136.013 176.447 122.592 191.056C108.94 205.915 88.9452 205.503 71.1174 203.485C54.5062 201.605 38.7988 193.58 25.8387 180.106C13.3783 167.152 2.03161 150.14 0.142078 129.698C-1.62789 110.55 13.6776 96.2116 16.3298 77.2316C19.7081 53.0547 2.60415 20.7489 17.5161 5.36221C32.1428 0 52.4248 18.5909 71.1174 20.6994Z ;
                    M201.904 44.7455C209.788 65.9826 195.082 90.0248 190.293 113.347C186.017 134.171 187.297 156.355 175.397 173.835C162.803 192.332 143.724 204.035 123.921 210.837C103.109 217.985 80.9746 220.706 61.3514 213.005C41.1777 205.089 25.6438 188.203 14.978 168.085C4.15134 147.663 0 123.932 1.18225 99.5117C3.76117 74.6027 12.412 49.4118 29.1526 31.1762C45.4164 13.46 68.1999 6.97183 90.2002 2.54418C110.95 0 131.476 0 150.709 6.7126C170.918 14.3476 193.881 23.1323 201.904 44.7455Z ;
                    M98.5875 1.09773C118.622 3.91366 129.488 30.4899 144.766 46.8913C158.408 61.5355 175.858 71.3599 183.154 91.8782C190.874 113.591 190.203 138.326 185.455 161.327C180.466 185.5 171.461 208.767 155.814 224.339C139.728 240.348 119.166 247.279 98.5875 247.777C77.6992 248.281 56.9674 241.857 39.7268 227.144C22.1409 212.137 7.37732 190.98 1.92919 165.293C-3.36374 140.338 3.11144 114.544 10.7565 90.5556C17.9671 67.9302 29.0468 48.1547 44.1693 32.7521C60.0597 16.5674 78.1981 0 98.5875 1.09773Z
                "
            /> 
        </path>
    )

    return (
        <>
            <svg fill="none" xmlns="http://www.w3.org/2000/svg" style={props.style}
                preserveAspectRatio="none"
                viewBox='0 0 200 200' // related to d of animate AND transform of clipPath
            >
                {!picturePath ? path : (
                    <defs>
                        <clipPath 
                            id='clipPath'
                            clipPathUnits='objectBoundingBox' transform='scale(.005 .005)'
                        >
                            {path}
                        </clipPath>
                    </defs>
                )}
            </svg>

            {!picturePath ? null : (
                <img src={picturePath} className={s.img} />
            )}
        </>
    )
}